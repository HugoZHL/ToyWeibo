{% for post in posts  %}
<hr/>
<div class="row">
  <div class="col-md-12 col-lg-12">
    <a href="{{ url_for('show_profile', userID=post.userID) }}" style="color: black;"><h4><strong>{{ post.username }}</strong></h4></a>
    <br/>
    <p style="font-size: 1.2em"><span style="color: blue">{{ post.topic }} </span>{{ post.text }}</p>
    <div>
      <p class="text-left">{{ post.time }}</p>
      <div class="text-right">
        {% if post.myself %}
        <form action="/delete_post" method="post" class="btn text-right">
          <input type="hidden" name="postID" value="{{ post.postID }}" />
          <input type="hidden" name="path" value="{{ request.path }}" />
          <a href="#" onclick="this.parentNode.submit()" type='submit' style="color: darkred;"><img src="{{ url_for('static', filename='images/icons/shanchu.png') }}" height="15" width="15"/> &nbsp;删除</a>
        </form>
        {% endif %}
        {% if post.praised %}
        <form action="/delete_praise" method="post" class="btn text-right">
          <input type="hidden" name="postID" value="{{ post.postID }}" />
          <input type="hidden" name="path" value="{{ request.path }}" />
          <a href="#" onclick="this.parentNode.submit()" type='submit' style="color: darkred;"><img src="{{ url_for('static', filename='images/icons/dianzan.png') }}" height="15" width="15"/> &nbsp;取消赞 {{ post.attitudesum }}</a>
        </form>
        {% else %}
        <form action="/add_praise" method="post" class="btn text-right">
          <input type="hidden" name="postID" value="{{ post.postID }}" />
          <input type="hidden" name="path" value="{{ request.path }}" />
          <a href="#" onclick="this.parentNode.submit()" type='submit'><img src="{{ url_for('static', filename='images/icons/dianzan.png') }}" height="15" width="15"/> &nbsp;赞 {{ post.attitudesum }}</a>
        </form>
        {% endif %}
        <a class="btn text-right"><img src="{{ url_for('static', filename='images/icons/pinglun.png') }}" height="15" width="15"/> &nbsp;评论 {{ post.commentsum }}</a>
        <a type="button" data-toggle="modal" data-target="#forward" class="btn text-right" data-postid="{{ post.postID }}" data-topic="{{ post.topic }}" data-content="{{ post.text }}"><img src="{{ url_for('static', filename='images/icons/fenxiang.png') }}" height="15" width="15"/> &nbsp;转发 {{ post.repostsum }}</a>
      </div>
    </div>
  </div>
</div>
{% endfor %}


<div class="modal fade" id="forward" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <div class="col-md-6 col-lg-6">
          <h4 class="modal-title" id="exampleModalLabel">转发</h4>
        </div>
        <div class="col-md-6 col-lg-6" style="text-align:center">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
      </div>
      <div class="modal-body">
        <form method="post" action='/forward_post'>
          <div class="form-group">
            <!-- <label for="message-text" class="col-form-label">Message:</label> -->
            <textarea class="form-control" id="message-text" placeholder="来说说分享心得..." name='forward_text'></textarea>
          </div>
          <div class="form-group">
            <!-- <label for="message-text" class="col-form-label">Message:</label> -->
            <input type="text" class="form-control" id="content" disabled/>
          </div>
          <input type="hidden" name="postid" id="postid"/>
          <input type="hidden" name="path" value="{{ request.path }}"/>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" style="text-align: right;">关闭</button>
          <button type="submit" class="btn btn-primary" style="text-align: right;">转发！</button>
        </form>
      </div>
    </div>
  </div>
</div>


<script>
$('#forward').on('show.bs.modal', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var content = button.data('content') // Extract info from data-* attributes
  var topic = button.data('topic')
  var postid = button.data('postid')
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('#content').val(topic + ' ' + content)
  modal.find('#postid').val(postid)
  // modal.find('.modal-title').text('New message to ' + recipient)
  // modal.find('.modal-body input').val(recipient)
})
</script>
